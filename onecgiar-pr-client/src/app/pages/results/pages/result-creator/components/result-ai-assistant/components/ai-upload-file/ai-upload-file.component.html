<div class="file-upload-container" [ngClass]="{ globalDisabled: !createResultManagementService.selectedInitiative() }">
  @if (!createResultManagementService.selectedFile()) {
    <div
      class="upload-area"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      [class.dragging]="isDragging()"
      (keydown.enter)="fileInput.click()"
      (click)="fileInput.click()">
      <input #fileInput type="file" [accept]="acceptedFormats.join(',')" (change)="onFileSelected($event)" style="display: none" />
      <i class="material-icons-round upload-icon">file_upload</i>
      <p class="pr-body-1">Drag and drop your file here or click to upload.</p>
      <p class="pr-body-2">Accepted file formats: {{ acceptedFormats.join(', ') }}</p>
    </div>
  } @else {
    <div class="upload-area" style="cursor: default">
      <div class="upload-area-content-container">
        <i class="pi pi-file upload-icon" style="font-size: 50px; margin-bottom: 15px"></i>
        <div class="upload-area-content">
          <p class="pr-body-2">{{ createResultManagementService.selectedFile()?.name }}</p>
          <p class="pr-body-2">{{ (createResultManagementService.selectedFile()?.size / (1024 * 1024)).toFixed(2) }} MB</p>

          <i
            class="pi pi-file pi-times-circle"
            style="font-size: 16px; cursor: pointer; color: #cf0808"
            (keydown.enter)="createResultManagementService.selectedFile.set(null)"
            (click)="createResultManagementService.selectedFile.set(null)"></i>
        </div>
      </div>
    </div>
  }

  <p class="file-size-limit">Each file can be up to {{ createResultManagementService.maxSizeMB }} MB. Ensure uploads comply with this limit.</p>
</div>
